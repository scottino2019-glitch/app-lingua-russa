<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>App Lingua Russa</title>
  <style>
    /* ... il tuo CSS ... */
  </style>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    const SUPABASE_URL = "https://arytlfiqiwdyiykaklmb.supabase.co";
    const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFyeXRsZmlxaXdkeWl5a2FrbG1iIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUwMDEzMTksImV4cCI6MjA3MDU3NzMxOX0.kVWYz6a5hDNazon7LYGK1AF4tnLEp8h-EdFGH17GXL8";
    const supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    async function caricaSezione(tabella, ordine = null) {
      const container = document.getElementById("content");
      container.innerHTML = "<p>Caricamento...</p>";

      let query = supabaseClient.from(tabella).select("*");
      if (ordine) query = query.order(ordine, { ascending: true });

      const { data, error } = await query;
      if (error) {
        container.innerHTML = `<p style='color:red'>Errore: ${error.message}</p>`;
        return;
      }

      if (!data || data.length === 0) {
        container.innerHTML = "<p>Nessun contenuto trovato.</p>";
        return;
      }

      container.innerHTML = "";
      data.forEach(item => {
        const div = document.createElement("div");
        div.classList.add("card");

        // Titolo
        if (item.titolo) div.innerHTML += `<h3>${item.titolo}</h3>`;

        // Dialogo
        if (item.dialogo) {
          div.innerHTML += `<h4>Dialogo</h4><pre>${item.dialogo}</pre>`;
        }

        // Traduzione
        if (item.traduzione) {
          div.innerHTML += `<h4>Traduzione</h4><pre>${item.traduzione}</pre>`;
        }

        // Vocabolario (se Ã¨ un array JSON)
        if (item.vocabolario) {
          let voca = Array.isArray(item.vocabolario)
            ? item.vocabolario
            : JSON.parse(item.vocabolario);
          div.innerHTML += `<h4>Vocabolario</h4><ul>${voca.map(v => `<li>${v.parola} = ${v.traduzione}</li>`).join("")}</ul>`;
        }

        // Esercizi
        if (item.esercizi) {
          let ex = Array.isArray(item.esercizi)
            ? item.esercizi
            : JSON.parse(item.esercizi);
          div.innerHTML += `<h4>Esercizi</h4><ul>${ex.map(e => `<li>${e.domanda} â†’ ${e.risposta}</li>`).join("")}</ul>`;
        }

        container.appendChild(div);
      });
    }

    function mostraHome() {
      document.getElementById("content").innerHTML = `
        <h2>Benvenuto! ðŸ‡·ðŸ‡º</h2>
        <p>Questa Ã¨ la tua app per imparare il russo.</p>
        <p>Usa il menu qui sopra per navigare tra lezioni, vocabolario, grammatica ed esercizi.</p>
      `;
    }

    document.addEventListener("DOMContentLoaded", mostraHome);
  </script>
</head>     

